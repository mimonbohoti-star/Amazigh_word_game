<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لعبة الكلمات الأمازيغية</title>

<style>
body {
  margin: 0;
  font-family: Tahoma, Arial, sans-serif;
  background: #0f172a;
  color: #fff;
  text-align: center;
}

.hidden { display: none !important; }

button {
  padding: 10px 18px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  background: #22c55e;
  color: #000;
  cursor: pointer;
}

.start-screen, .menu, .game {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.flag-symbol {
  font-size: 80px;
  margin-bottom: 20px;
}

.level-box {
  background: #1e293b;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 420px;
}

.word {
  font-size: 26px;
  margin: 20px 0;
  letter-spacing: 2px;
  direction: ltr;
}

input {
  padding: 10px;
  font-size: 18px;
  text-align: center;
  direction: ltr;
  border-radius: 6px;
  border: none;
  width: 80%;
}

.message {
  margin-top: 15px;
  min-height: 24px;
}
</style>
</head>

<body>

<!-- شاشة البداية -->
<div class="start-screen" id="startScreen">
  <div class="flag-symbol">ⵣ</div>
  <button onclick="showMenu()">ابدأ</button>
</div>

<!-- القائمة -->
<div class="menu hidden" id="menu">
  <h2>اختر المرحلة</h2>
  <button onclick="startLevel(1)">المرحلة 1</button><br><br>
  <button onclick="startLevel(2)">المرحلة 2</button><br><br>
  <button onclick="startLevel(3)">المرحلة 3</button>
</div>

<!-- اللعبة -->
<div class="game hidden" id="game">
  <div class="level-box">
    <h3 id="levelTitle"></h3>
    <div class="word" id="question"></div>
    <input id="answerInput" placeholder="ⵣⵣⵣ">
    <br><br>
    <button onclick="checkAnswer()">تحقق</button>
    <div class="message" id="message"></div>
    <br>
    <button onclick="showMenu()">الرجوع للقائمة</button>
  </div>
</div>

<script>
// ===============================
// الكلمات حسب المراحل
// ===============================
const levels = {
  1: [
    { q: "SUN", a: "ⵜⴰⴼⵓⵢⵜ" },
    { q: "WATER", a: "ⴰⵎⴰⵏ" },
    { q: "FIRE", a: "ⵜⵉⵙⵉ" }
  ],
  2: [
    { q: "MOON", a: "ⴰⵢⵓⵔ" },
    { q: "STAR", a: "ⵉⵜⵔⵉ" },
    { q: "EARTH", a: "ⴰⴽⴰⵍ" }
  ],
  3: [
    { q: "MOUNTAIN", a: "ⴰⴷⵔⴰⵔ" },
    { q: "WIND", a: "ⴰⴼⴰⵙ" },
    { q: "RAIN", a: "ⴰⵏⵣⴰⵔ" }
  ]
};

let currentLevel = 1;
let currentIndex = 0;

// ===============================
// إظهار شاشة واحدة فقط
// ===============================
function hideAll() {
  startScreen.classList.add("hidden");
  menu.classList.add("hidden");
  game.classList.add("hidden");
}

function showMenu() {
  hideAll();
  menu.classList.remove("hidden");
}

function startLevel(level) {
  currentLevel = level;
  currentIndex = 0;
  localStorage.setItem("amazighLevel", level);
  hideAll();
  game.classList.remove("hidden");
  levelTitle.innerText = "المرحلة " + level;
  loadQuestion();
}

// ===============================
function loadQuestion() {
  const item = levels[currentLevel][currentIndex];
  question.innerText = item.q;
  answerInput.value = "";
  message.innerText = "";
}

function checkAnswer() {
  const input = answerInput.value.trim();
  const correct = levels[currentLevel][currentIndex].a;

  if (input === correct) {
    currentIndex++;
    if (currentIndex >= levels[currentLevel].length) {
      message.innerText = "✔️ أحسنت! انتهت المرحلة";
    } else {
      loadQuestion();
    }
  } else {
    message.innerText = "❌ حاول مرة أخرى";
  }
}

// ===============================
// عند التحميل: البداية فقط
// ===============================
window.onload = () => {
  hideAll();
  startScreen.classList.remove("hidden");
};
</script>

</body>
</html>
