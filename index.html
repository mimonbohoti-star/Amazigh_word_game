<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#111;
  color:#fff;
  text-align:center;
}

.top-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 15px;
  background:#000;
  font-size:16px;
}

.screen{
  display:none;
  padding:20px;
}
.screen.active{
  display:block;
}

button{
  padding:12px;
  margin:10px auto;
  width:80%;
  font-size:16px;
  cursor:pointer;
}

.success{ color:#4caf50; }
.error{ color:#f44336; }
.timer{ color:#ff9800; }
.hearts{ color:#e91e63; }
</style>
</head>

<body>

<!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
<div class="top-bar">
  <div class="hearts">â¤ï¸ <span id="hearts">3</span></div>
  <div>â± <span id="timer">0</span></div>
  <div>â­ <span id="score">0</span></div>
</div>

<!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
<div id="menu" class="screen active">
  <h1>ğŸ® Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h1>
  <button onclick="startStage(1)">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</button>
  <button onclick="startStage(2)">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2</button>
  <button onclick="startStage(3)">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3</button>
</div>

<!-- Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div id="game" class="screen">
  <h2 id="stageTitle"></h2>
  <p id="question"></p>
  <div id="options"></div>
  <p id="result"></p>
</div>

<script>
// ================= Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =================
const stages = {
  1: [
    { q:"2 + 2 = ØŸ", options:["3","4","5"], answer:1 },
    { q:"Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ", options:["Ø£Ø²Ø±Ù‚","Ø£Ø®Ø¶Ø±","Ø£Ø­Ù…Ø±"], answer:0 }
  ],
  2: [
    { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…ØºØ±Ø¨ØŸ", options:["Ø§Ù„Ø±Ø¨Ø§Ø·","ÙØ§Ø³","Ù…Ø±Ø§ÙƒØ´"], answer:0 },
    { q:"Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŸ", options:["6","7","8"], answer:1 }
  ],
  3: [
    { q:"âˆš16 = ØŸ", options:["3","4","5"], answer:1 },
    { q:"Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø©ØŸ", options:["Ø¥ÙØ±ÙŠÙ‚ÙŠØ§","Ø¢Ø³ÙŠØ§","Ø£ÙˆØ±ÙˆØ¨Ø§"], answer:1 }
  ]
};

const timePerStage = {1:10, 2:8, 3:6};

// ================= Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª =================
let currentStage = 1;
let currentQuestion = 0;
let timer = null;
let timeLeft = 0;
let hearts = 3;

let score = Number(localStorage.getItem("score")) || 0;

// ================= Ø§Ù„Ø¹Ù†Ø§ØµØ± =================
const menu = document.getElementById("menu");
const game = document.getElementById("game");
const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const resultEl = document.getElementById("result");
const scoreEl = document.getElementById("score");
const timerEl = document.getElementById("timer");
const heartsEl = document.getElementById("hearts");
const stageTitle = document.getElementById("stageTitle");

scoreEl.textContent = score;

// ================= Ø¨Ø¯Ø¡ Ù…Ø±Ø­Ù„Ø© =================
function startStage(stage){
  currentStage = stage;
  currentQuestion = 0;
  hearts = 3;
  heartsEl.textContent = hearts;

  menu.classList.remove("active");
  game.classList.add("active");
  stageTitle.textContent = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© " + stage;
  showQuestion();
}

// ================= Ø¹Ø±Ø¶ Ø³Ø¤Ø§Ù„ =================
function showQuestion(){
  clearInterval(timer);

  const q = stages[currentStage][currentQuestion];
  questionEl.textContent = q.q;
  optionsEl.innerHTML = "";
  resultEl.textContent = "";

  timeLeft = timePerStage[currentStage];
  timerEl.textContent = timeLeft;

  timer = setInterval(()=>{
    timeLeft--;
    timerEl.textContent = timeLeft;
    if(timeLeft === 0){
      clearInterval(timer);
      loseHeart("â± Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª");
    }
  },1000);

  q.options.forEach((opt,i)=>{
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = ()=>checkAnswer(i);
    optionsEl.appendChild(btn);
  });
}

// ================= ØªØ­Ù‚Ù‚ =================
function checkAnswer(i){
  clearInterval(timer);
  const q = stages[currentStage][currentQuestion];

  if(i === q.answer){
    const add = currentStage === 1 ? 10 : currentStage === 2 ? 15 : 20;
    score += add;
    localStorage.setItem("score",score);
    scoreEl.textContent = score;
    resultEl.textContent = "âœ” ØµØ­ÙŠØ­ (+"+add+")";
    resultEl.className = "success";
    setTimeout(nextQuestion,700);
  }else{
    loseHeart("âœ– Ø®Ø·Ø£");
  }
}

// ================= Ø®Ø³Ø§Ø±Ø© Ù‚Ù„Ø¨ =================
function loseHeart(msg){
  hearts--;
  heartsEl.textContent = hearts;
  resultEl.textContent = msg;
  resultEl.className = "error";

  if(hearts <= 0){
    setTimeout(gameOver,700);
  }else{
    setTimeout(nextQuestion,700);
  }
}

// ================= Ø§Ù„ØªØ§Ù„ÙŠ =================
function nextQuestion(){
  currentQuestion++;
  if(currentQuestion < stages[currentStage].length){
    showQuestion();
  }else{
    endStage();
  }
}

// ================= Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø±Ø­Ù„Ø© =================
function endStage(){
  alert("ğŸ‰ Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ù…Ø±Ø­Ù„Ø© " + currentStage);
  game.classList.remove("active");
  menu.classList.add("active");
}

// ================= Ø®Ø³Ø±Øª =================
function gameOver(){
  alert("ğŸ’€ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª");
  game.classList.remove("active");
  menu.classList.add("active");
}
</script>

</body>
</html>
