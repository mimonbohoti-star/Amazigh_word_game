<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</title>

<style>
body {
  margin: 0;
  font-family: Tahoma, sans-serif;
  background: radial-gradient(circle at top, #111, #000);
  color: #fff;
  text-align: center;
}

.top-bar {
  display: flex;
  justify-content: space-between;
  padding: 10px 15px;
  background: #000;
  border-bottom: 1px solid #222;
  font-size: 14px;
}

h1 {
  margin: 20px 0;
}

.card {
  background: #111;
  border-radius: 15px;
  padding: 20px;
  margin: 15px;
  box-shadow: 0 0 20px rgba(0,0,0,.6);
}

.question {
  font-size: 18px;
  margin-bottom: 20px;
}

button {
  width: 90%;
  max-width: 400px;
  padding: 14px;
  margin: 8px auto;
  border-radius: 12px;
  border: none;
  font-size: 16px;
  cursor: pointer;
  transition: .2s;
  display: block;
}

.answer-btn {
  background: #eee;
  color: #000;
}

.answer-btn:hover {
  background: #ddd;
}

.correct {
  background: #2ecc71 !important;
}

.wrong {
  background: #e74c3c !important;
  color: #fff;
}

.menu button {
  background: #f1f1f1;
  color: #000;
}

.menu button.locked {
  background: #555;
  color: #aaa;
  cursor: not-allowed;
}

.hidden {
  display: none;
}

.reset {
  background: #444;
  color: #fff;
  margin-top: 20px;
}
</style>
</head>

<body>

<div class="top-bar">
  <span>â­ <span id="score">0</span></span>
  <span>â± <span id="time">10</span> Ø«</span>
  <span>â¤ï¸ <span id="lives">3</span></span>
</div>

<h1>ğŸ® Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h1>

<div id="menu" class="menu">
  <button id="stage1" onclick="startGame(1)">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</button>
  <button id="stage2" onclick="startGame(2)">ğŸ”’ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2</button>
  <button id="stage3" onclick="startGame(3)">ğŸ”’ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3</button>
  <button class="reset" onclick="resetProgress()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØµÙÙŠØ±</button>
</div>

<div id="game" class="hidden">
  <div class="card">
    <div id="stageTitle"></div>
    <div id="question" class="question"></div>
    <button class="answer-btn" onclick="checkAnswer(this)"></button>
    <button class="answer-btn" onclick="checkAnswer(this)"></button>
    <button class="answer-btn" onclick="checkAnswer(this)"></button>
  </div>
</div>

<script>
let score = Number(localStorage.getItem("score")) || 0;
let lives = Number(localStorage.getItem("lives")) || 3;
let unlockedStage = Number(localStorage.getItem("unlockedStage")) || 1;

let currentStage = 1;
let time = 10;
let timer;
let correctAnswer = "";

document.getElementById("score").innerText = score;
document.getElementById("lives").innerText = lives;

const questions = {
  1: { q: "ÙƒÙ… 2 + 2 ØŸ", a: ["3","4","5"], c: "4" },
  2: { q: "Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ", a: ["Ø£Ø²Ø±Ù‚","Ø£Ø®Ø¶Ø±","Ø£Ø­Ù…Ø±"], c: "Ø£Ø²Ø±Ù‚" },
  3: { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŸ", a: ["5","6","7"], c: "7" }
};

function updateMenu() {
  for (let i = 1; i <= 3; i++) {
    const btn = document.getElementById("stage" + i);
    if (i <= unlockedStage) {
      btn.disabled = false;
      btn.classList.remove("locked");
      btn.innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© " + i;
    } else {
      btn.disabled = true;
      btn.classList.add("locked");
      btn.innerText = "ğŸ”’ Ø§Ù„Ù…Ø±Ø­Ù„Ø© " + i;
    }
  }
}

updateMenu();

function startGame(stage) {
  if (stage > unlockedStage) return;

  currentStage = stage;

  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");

  const q = questions[stage];
  document.getElementById("stageTitle").innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© " + stage;
  document.getElementById("question").innerText = q.q;

  document.querySelectorAll(".answer-btn").forEach((b,i)=>{
    b.innerText = q.a[i];
    b.className = "answer-btn";
  });

  correctAnswer = q.c;
  startTimer();
}

function startTimer() {
  clearInterval(timer);
  time = 10;
  document.getElementById("time").innerText = time;

  timer = setInterval(()=>{
    time--;
    document.getElementById("time").innerText = time;
    if(time <= 0){
      clearInterval(timer);
      loseLife();
    }
  },1000);
}

function checkAnswer(btn) {
  clearInterval(timer);

  if(btn.innerText === correctAnswer){
    btn.classList.add("correct");
    score += 10;
    localStorage.setItem("score", score);
    document.getElementById("score").innerText = score;

    if (currentStage === unlockedStage && unlockedStage < 3) {
      unlockedStage++;
      localStorage.setItem("unlockedStage", unlockedStage);
    }

    setTimeout(()=>{
      alert("Ù…Ø±Ø­Ù„Ø© Ù…ÙƒØªÙ…Ù„Ø© ğŸ‰");
      location.reload();
    },500);

  } else {
    btn.classList.add("wrong");
    loseLife();
  }
}

function loseLife() {
  lives--;
  localStorage.setItem("lives", lives);
  document.getElementById("lives").innerText = lives;

  if(lives <= 0){
    alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ğŸ˜¢");
    resetProgress();
  }
}

function resetProgress() {
  localStorage.clear();
  location.reload();
}
</script>

</body>
</html>
