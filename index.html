<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لعبة الكلمات الأمازيغية</title>

<style>
:root{
  --bg:#0b132b;
  --card:#1c2541;
  --blue:#5bc0eb;
  --green:#2ec4b6;
  --yellow:#ffd166;
  --text:#ffffff;
}

body {
  margin: 0;
  font-family: Tahoma, Arial, sans-serif;
  background: radial-gradient(circle at top, #14213d, var(--bg));
  color: var(--text);
  text-align: center;
}

.hidden { display: none !important; }

button {
  padding: 12px 18px;
  font-size: 16px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

.start-screen,
.menu,
.game {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.flag-symbol {
  font-size: 90px;
  margin-bottom: 25px;
  color: var(--yellow);
}

.start-screen button{
  background: var(--green);
  color:#000;
}

.menu button{
  background: var(--blue);
  color:#000;
  width:200px;
}

.level-box {
  background: linear-gradient(180deg, var(--card), #111827);
  padding: 22px;
  border-radius: 16px;
  width: 95%;
  max-width: 420px;
  box-shadow: 0 10px 30px rgba(0,0,0,.4);
}

.level-box h3{
  margin-top:0;
  color: var(--yellow);
}

.word {
  font-size: 26px;
  margin: 10px 0 15px;
  letter-spacing: 2px;
  direction: ltr;
  color: var(--blue);
}

.symbol-center{
  font-size:60px;
  color: var(--yellow);
  margin: 5px 0 15px;
}

/* ===== مربعات الجواب ===== */
.answer-boxes{
  display:flex;
  justify-content:center;
  gap:8px;
  margin:10px 0 15px;
}

.answer-box{
  width:42px;
  height:48px;
  border-radius:8px;
  background:#fff;
  color:#000;
  font-size:26px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
}

/* لوحة الحروف */
.keyboard {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
}

.keyboard button {
  background: #334155;
  color: #fff;
  min-width: 42px;
  border-radius: 8px;
}

.check-btn{
  background: var(--yellow);
  color:#000;
  margin-top:10px;
}

.back-btn{
  background: var(--green);
  color:#000;
  margin-top:12px;
}

.message {
  margin-top: 10px;
  min-height: 24px;
}
</style>
</head>

<body>

<div class="start-screen" id="startScreen">
  <div class="flag-symbol">ⵣ</div>
  <button onclick="showMenu()">ابدأ</button>
</div>

<div class="menu hidden" id="menu">
  <h2>اختر المرحلة</h2>
  <button onclick="startLevel(1)">المرحلة 1</button><br><br>
  <button onclick="startLevel(2)">المرحلة 2</button><br><br>
  <button onclick="startLevel(3)">المرحلة 3</button>
</div>

<div class="game hidden" id="game">
  <div class="level-box">
    <h3 id="levelTitle"></h3>

    <div class="symbol-center">ⵣ</div>

    <div class="word" id="question"></div>

    <!-- مربعات الجواب -->
    <div class="answer-boxes" id="answerBoxes"></div>

    <div class="keyboard" id="keyboard"></div>

    <button class="check-btn" onclick="checkAnswer()">تحقق</button>

    <div class="message" id="message"></div>

    <button class="back-btn" onclick="showMenu()">الرجوع للقائمة</button>
  </div>
</div>

<script>
const levels = {
  1: [
    { q: "SUN", a: "ⵜⴰⴼⵓⵢⵜ" },
    { q: "WATER", a: "ⴰⵎⴰⵏ" },
    { q: "FIRE", a: "ⵜⵉⵙⵉ" }
  ],
  2: [
    { q: "MOON", a: "ⴰⵢⵓⵔ" },
    { q: "STAR", a: "ⵉⵜⵔⵉ" },
    { q: "EARTH", a: "ⴰⴽⴰⵍ" }
  ],
  3: [
    { q: "MOUNTAIN", a: "ⴰⴷⵔⴰⵔ" },
    { q: "WIND", a: "ⴰⴼⴰⵙ" },
    { q: "RAIN", a: "ⴰⵏⵣⴰⵔ" }
  ]
};

const letters = ["ⴰ","ⴱ","ⴳ","ⴷ","ⴹ","ⴻ","ⴼ","ⴽ","ⵉ","ⵍ","ⵎ","ⵏ","ⵔ","ⵙ","ⵜ","ⵓ","ⵢ","ⵣ"];

let currentLevel = 1;
let currentIndex = 0;
let userAnswer = "";

function hideAll() {
  startScreen.classList.add("hidden");
  menu.classList.add("hidden");
  game.classList.add("hidden");
}

function showMenu() {
  hideAll();
  menu.classList.remove("hidden");
}

function startLevel(level) {
  currentLevel = level;
  currentIndex = 0;
  hideAll();
  game.classList.remove("hidden");
  levelTitle.innerText = "المرحلة " + level;
  loadQuestion();
}

function loadQuestion() {
  const correct = levels[currentLevel][currentIndex].a;
  question.innerText = levels[currentLevel][currentIndex].q;
  message.innerText = "";
  userAnswer = "";
  buildAnswerBoxes(correct.length);
  buildKeyboard();
}

function buildAnswerBoxes(count){
  answerBoxes.innerHTML = "";
  for(let i=0;i<count;i++){
    const box = document.createElement("div");
    box.className = "answer-box";
    box.textContent = "";
    answerBoxes.appendChild(box);
  }
}

function updateBoxes(){
  const boxes = document.querySelectorAll(".answer-box");
  boxes.forEach((box,i)=>{
    box.textContent = userAnswer[i] || "";
  });
}

function buildKeyboard() {
  keyboard.innerHTML = "";
  letters.forEach(l => {
    const b = document.createElement("button");
    b.textContent = l;
    b.onclick = () => {
      const max = levels[currentLevel][currentIndex].a.length;
      if(userAnswer.length < max){
        userAnswer += l;
        updateBoxes();
      }
    };
    keyboard.appendChild(b);
  });

  const del = document.createElement("button");
  del.textContent = "⌫";
  del.onclick = () => {
    userAnswer = userAnswer.slice(0,-1);
    updateBoxes();
  };
  keyboard.appendChild(del);
}

function checkAnswer() {
  const correct = levels[currentLevel][currentIndex].a;
  if (userAnswer === correct) {
    currentIndex++;
    currentIndex >= levels[currentLevel].length
      ? message.innerText = "✔️ أحسنت! انتهت المرحلة"
      : loadQuestion();
  } else {
    message.innerText = "❌ حاول مرة أخرى";
  }
}

window.onload = () => {
  hideAll();
  startScreen.classList.remove("hidden");
};
</script>

</body>
</html>
