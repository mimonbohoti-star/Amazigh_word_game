<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ŸÑÿπÿ®ÿ© ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ£ŸÖÿßÿ≤Ÿäÿ∫Ÿäÿ©</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(180deg,#0e1624,#12263a);
  color:#fff;
  text-align:center;
}
h1{margin:10px 0}

.game{
  max-width:420px;
  margin:auto;
  padding:15px;
}

img{
  width:100%;
  max-height:220px;
  object-fit:cover;
  border-radius:18px;
  box-shadow:0 10px 25px rgba(0,0,0,.5);
}

input{
  width:100%;
  font-size:22px;
  padding:12px;
  margin:15px 0;
  text-align:left;
  direction:ltr;
  border-radius:10px;
  border:none;
}

button{
  padding:14px 30px;
  font-size:18px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  background:#1abc9c;
  color:#fff;
  transition:.2s;
}
button:active{transform:scale(.96)}

#message{
  min-height:30px;
  margin-top:10px;
  font-size:18px;
}
.success{color:#00ff99}
.error{color:#ff5555}

/* shake */
.shake{
  animation:shake .3s;
}
@keyframes shake{
  0%,100%{transform:translateX(0)}
  25%{transform:translateX(6px)}
  75%{transform:translateX(-6px)}
}

/* celebration */
#celebration{
  position:fixed;
  inset:0;
  pointer-events:none;
  display:none;
}
.star{
  position:absolute;
  top:-30px;
  font-size:26px;
  animation:fall 2.5s linear forwards;
}
@keyframes fall{
  to{transform:translateY(120vh) rotate(360deg);opacity:0}
}
</style>
</head>

<body>

<div class="game">
  <h1 id="title"></h1>
  <img id="image" src="" onerror="this.style.display='none'">
  <input id="answer" readonly>
  <button onclick="check()">ÿ™ÿ≠ŸÇŸÇ</button>
  <div id="message"></div>
</div>

<div id="celebration"></div>

<script>
const stages = [
 {word:"‚µú‚¥∞‚¥º‚µì‚µ¢‚µú", image:"sun.jpg"},
 {word:"‚¥∞‚µ¢‚µ¢‚µì‚µî", image:"moon.jpg"},
 {word:"‚µâ‚µú‚µî‚µâ", image:"flower.jpg"},
 {word:"‚¥∞‚¥∑‚µî‚¥∞‚µî", image:"mountain.jpg"},
 {word:"‚¥∞‚µô‚µâ‚¥º", image:"river.jpg"}
];

let stage = 0;
const img = document.getElementById("image");
const ans = document.getElementById("answer");
const msg = document.getElementById("message");
const title = document.getElementById("title");

loadStage();

function loadStage(){
  const s = stages[stage];
  title.textContent = s.word;
  img.style.display="block";
  img.src = s.image;
  ans.value = "";
  msg.textContent = "";
  msg.className="";
}

document.addEventListener("keydown",e=>{
  const max = stages[stage].word.length;
  if(e.key==="Backspace"){
    ans.value = ans.value.slice(0,-1);
  }
  else if(e.key.length===1 && ans.value.length < max){
    ans.value += e.key;
  }
});

function check(){
  if(ans.value === stages[stage].word){
    success();
    stage++;
    if(stage < stages.length){
      setTimeout(loadStage,1200);
    }else{
      msg.textContent="üéâ ÿ£ÿ≠ÿ≥ŸÜÿ™! ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÑÿπÿ®ÿ©";
      msg.className="success";
    }
  }else{
    msg.textContent="‚ùå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ";
    msg.className="error";
    ans.classList.add("shake");
    setTimeout(()=>ans.classList.remove("shake"),300);
    ans.value="";
  }
}

function success(){
  msg.textContent="‚úîÔ∏è ÿµÿ≠Ÿäÿ≠";
  msg.className="success";
  playSound();
  celebrate();
}

function playSound(){
  const ctx = new (AudioContext||webkitAudioContext)();
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.frequency.value=900;
  g.gain.value=0.15;
  o.connect(g).connect(ctx.destination);
  o.start();
  o.stop(ctx.currentTime+0.25);
}

function celebrate(){
  const c = document.getElementById("celebration");
  c.innerHTML="";
  c.style.display="block";
  for(let i=0;i<25;i++){
    const s=document.createElement("div");
    s.className="star";
    s.textContent=["‚≠ê","‚ú®","‚µ£"][Math.floor(Math.random()*3)];
    s.style.left=Math.random()*100+"%";
    c.appendChild(s);
  }
  setTimeout(()=>c.style.display="none",2000);
}
</script>

</body>
</html>
