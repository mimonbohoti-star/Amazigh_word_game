<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© â€“ Ù…Ø±Ø§Ø­Ù„</title>
<style>
body{
  font-family: Arial, sans-serif;
  background:#111;
  color:#fff;
  margin:0;
  padding:0;
  text-align:center;
}
.screen{
  display:none;
  padding:20px;
}
.screen.active{
  display:block;
}
button{
  padding:10px 20px;
  margin:10px;
  font-size:16px;
  cursor:pointer;
}
.options button{
  display:block;
  width:80%;
  margin:10px auto;
}
.locked{
  opacity:0.4;
}
.success{
  color:#4caf50;
}
.error{
  color:#f44336;
}
</style>
</head>

<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="menu" class="screen active">
  <h1>ðŸŽ® Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h1>
  <p>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©</p>
  <button id="stage1Btn">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</button>
  <button id="stage2Btn">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2 ðŸ”’</button>
  <button id="stage3Btn">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3 ðŸ”’</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div id="game" class="screen">
  <h2 id="stageTitle"></h2>
  <p id="question"></p>
  <div class="options" id="options"></div>
  <p id="result"></p>
</div>

<script>
// ================= Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =================
const stages = {
  1: [
    { q: "Ù…Ø§ Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ", options: ["Ø£Ø²Ø±Ù‚","Ø£Ø®Ø¶Ø±","Ø£Ø­Ù…Ø±"], answer: 0 },
    { q: "2 + 2 = ØŸ", options: ["3","4","5"], answer: 1 }
  ],
  2: [
    { q: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…ØºØ±Ø¨ØŸ", options: ["Ø§Ù„Ø±Ø¨Ø§Ø·","ÙØ§Ø³","Ù…Ø±Ø§ÙƒØ´"], answer: 0 },
    { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŸ", options: ["5","6","7"], answer: 2 }
  ],
  3: [
    { q: "Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø©ØŸ", options: ["Ø¥ÙØ±ÙŠÙ‚ÙŠØ§","Ø¢Ø³ÙŠØ§","Ø£ÙˆØ±ÙˆØ¨Ø§"], answer: 1 },
    { q: "Ø§Ù„Ø¬Ø°Ø± Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠ Ù„Ù€ 16ØŸ", options: ["3","4","5"], answer: 1 }
  ]
};

let currentStage = 1;
let currentQuestion = 0;

// ================= Ø§Ù„ØªØ®Ø²ÙŠÙ† =================
let unlockedStage = localStorage.getItem("unlockedStage");
if(!unlockedStage){
  unlockedStage = 1;
  localStorage.setItem("unlockedStage",1);
}
unlockedStage = parseInt(unlockedStage);

// ================= Ø¹Ù†Ø§ØµØ± =================
const menu = document.getElementById("menu");
const game = document.getElementById("game");
const stageTitle = document.getElementById("stageTitle");
const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const resultEl = document.getElementById("result");

const stage1Btn = document.getElementById("stage1Btn");
const stage2Btn = document.getElementById("stage2Btn");
const stage3Btn = document.getElementById("stage3Btn");

// ================= ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ =================
function updateMenu(){
  if(unlockedStage >= 2){
    stage2Btn.innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2";
    stage2Btn.classList.remove("locked");
  }
  if(unlockedStage >= 3){
    stage3Btn.innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3";
    stage3Btn.classList.remove("locked");
  }
}
updateMenu();

// ================= Ø¨Ø¯Ø¡ Ù…Ø±Ø­Ù„Ø© =================
function startStage(stage){
  if(stage > unlockedStage) return;

  currentStage = stage;
  currentQuestion = 0;
  menu.classList.remove("active");
  game.classList.add("active");
  stageTitle.innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© " + stage;
  showQuestion();
}

// ================= Ø¹Ø±Ø¶ Ø³Ø¤Ø§Ù„ =================
function showQuestion(){
  const q = stages[currentStage][currentQuestion];
  questionEl.innerText = q.q;
  optionsEl.innerHTML = "";
  resultEl.innerText = "";

  q.options.forEach((opt,index)=>{
    const btn = document.createElement("button");
    btn.innerText = opt;
    btn.onclick = ()=>checkAnswer(index);
    optionsEl.appendChild(btn);
  });
}

// ================= ØªØ­Ù‚Ù‚ =================
function checkAnswer(index){
  const q = stages[currentStage][currentQuestion];
  if(index === q.answer){
    resultEl.innerText = "âœ” Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©";
    resultEl.className = "success";
    currentQuestion++;

    setTimeout(()=>{
      if(currentQuestion < stages[currentStage].length){
        showQuestion();
      }else{
        finishStage();
      }
    },800);
  }else{
    resultEl.innerText = "âœ– Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©";
    resultEl.className = "error";
  }
}

// ================= Ø¥Ù†Ù‡Ø§Ø¡ Ù…Ø±Ø­Ù„Ø© =================
function finishStage(){
  if(unlockedStage === currentStage && currentStage < 3){
    unlockedStage++;
    localStorage.setItem("unlockedStage",unlockedStage);
  }
  alert("ðŸŽ‰ Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ù…Ø±Ø­Ù„Ø© " + currentStage);
  game.classList.remove("active");
  menu.classList.add("active");
  updateMenu();
}

// ================= Ø£Ø²Ø±Ø§Ø± =================
stage1Btn.onclick = ()=>startStage(1);
stage2Btn.onclick = ()=>startStage(2);
stage3Btn.onclick = ()=>startStage(3);
</script>

</body>
</html>
