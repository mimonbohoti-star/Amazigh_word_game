<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لعبة الكلمات الأمازيغية</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(180deg,#0f3c3c,#2f7f7f);
  color:#fff;
  text-align:center;
}
.screen{display:none;min-height:100vh;padding:40px 15px}
.screen.active{display:block}
h1{margin-top:120px;font-size:26px}
button{
  border:none;
  padding:12px 22px;
  border-radius:20px;
  font-size:16px;
  cursor:pointer;
}
#startBtn{margin-top:30px;background:#5dd6e8}
.question{font-size:22px;margin:30px 0}
.answer{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:20px;
}
.slot{
  width:55px;
  height:55px;
  background:#1f3236;
  border-radius:12px;
  line-height:55px;
  font-size:28px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  max-width:320px;
  margin:20px auto;
}
.cell{
  background:#24383c;
  padding:18px 0;
  border-radius:10px;
  font-size:22px;
}
.cell.used{
  opacity:.3;
  pointer-events:none;
}
.controls{
  display:flex;
  justify-content:center;
  gap:15px;
  margin-top:20px;
}
#deleteBtn{background:#e07a7a}
#nextBtn{background:#7fc97f}
</style>
</head>

<body>

<!-- البداية -->
<div class="screen active" id="startScreen">
  <h1>ⵣ لعبة الكلمات الأمازيغية ⵣ</h1>
  <button id="startBtn">ابدأ اللعب</button>
</div>

<!-- اللعبة -->
<div class="screen" id="gameScreen">
  <div class="question" id="question"></div>
  <div class="answer" id="answerSlots"></div>

  <div class="grid" id="grid"></div>

  <div class="controls">
    <button id="deleteBtn">مسح حرف</button>
    <button id="nextBtn">سؤال آخر</button>
  </div>
</div>

<script>
const extraLetters=["ⴰ","ⵉ","ⵓ","ⴽ","ⵣ","ⵔ","ⵙ","ⵎ"];

const questions=[
 {q:"حيوان أليف",a:["ⵎ","ⵓ","ⵛ"]},
 {q:"لون السماء",a:["ⴰ","ⵣ","ⵣ"]}
];

let index=0;
let slotIndex=0;
let usedCells=[];

const startScreen=document.getElementById("startScreen");
const gameScreen=document.getElementById("gameScreen");
const questionEl=document.getElementById("question");
const slotsEl=document.getElementById("answerSlots");
const gridEl=document.getElementById("grid");

document.getElementById("startBtn").onclick=()=>{
 startScreen.classList.remove("active");
 gameScreen.classList.add("active");
 loadQuestion();
};

document.getElementById("nextBtn").onclick=()=>{
 index=(index+1)%questions.length;
 loadQuestion();
};

document.getElementById("deleteBtn").onclick=()=>{
 if(slotIndex>0){
   slotIndex--;
   slotsEl.children[slotIndex].textContent="";
   const cell=usedCells.pop();
   if(cell){
     cell.classList.remove("used");
   }
 }
};

function loadQuestion(){
 const item=questions[index];
 slotIndex=0;
 usedCells=[];
 questionEl.textContent=item.q;
 slotsEl.innerHTML="";
 gridEl.innerHTML="";

 item.a.forEach(()=>{
  const s=document.createElement("div");
  s.className="slot";
  slotsEl.appendChild(s);
 });

 let letters=[...item.a];
 while(letters.length<10){
   letters.push(extraLetters[Math.floor(Math.random()*extraLetters.length)]);
 }

 shuffle(letters).forEach(letter=>{
  const c=document.createElement("div");
  c.className="cell";
  c.textContent=letter;
  c.onclick=()=>{
    if(slotIndex<slotsEl.children.length){
      slotsEl.children[slotIndex].textContent=letter;
      slotIndex++;
      c.classList.add("used");
      usedCells.push(c);
    }
  };
  gridEl.appendChild(c);
 });
}

function shuffle(arr){
 return arr.sort(()=>Math.random()-0.5);
}
</script>

</body>
</html>
