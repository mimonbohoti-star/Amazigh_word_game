<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#000;
  color:#fff;
  text-align:center;
}

.top-bar{
  display:flex;
  justify-content:space-between;
  padding:10px 15px;
  font-size:18px;
}

h1{
  margin:20px 0;
}

button{
  width:90%;
  padding:15px;
  margin:10px auto;
  font-size:20px;
  border:none;
  border-radius:12px;
  cursor:pointer;
}

.stage-btn{background:#eee;color:#000;}
.locked{background:#555;color:#aaa;cursor:not-allowed;}
.correct{background:#22c55e;color:#fff;}
.answer{background:#444;color:#fff;}

#game,#menu{display:none;}
</style>
</head>

<body>

<div class="top-bar">
  <div>â¤ï¸ <span id="lives">3</span></div>
  <div>â± <span id="time">10</span> Ø«</div>
  <div>â­ <span id="stars">0</span></div>
</div>

<h1>ğŸ® Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h1>

<!-- MENU -->
<div id="menu">
  <button class="stage-btn" onclick="startStage(1)">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</button>
  <button class="stage-btn" onclick="startStage(2)" id="stage2">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2</button>
  <button class="stage-btn locked" id="stage3">ğŸ”’ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3</button>
  <button class="stage-btn" onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØµÙÙŠØ±</button>
</div>

<!-- GAME -->
<div id="game">
  <h2 id="question"></h2>
  <div id="answers"></div>
</div>

<script>
let data = {
  1: [
    {q:"ÙƒÙ… 2 + 2 ØŸ", a:["3","4","5"], c:1},
    {q:"Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ", a:["Ø£Ø²Ø±Ù‚","Ø£Ø®Ø¶Ø±","Ø£Ø­Ù…Ø±"], c:0},
    {q:"ÙƒÙ… ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŸ", a:["5","6","7"], c:2}
  ],
  2: [
    {q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…ØºØ±Ø¨ØŸ", a:["ÙØ§Ø³","Ø§Ù„Ø±Ø¨Ø§Ø·","Ù…Ø±Ø§ÙƒØ´"], c:1},
    {q:"ÙƒÙ… Ø´Ù‡Ø± ÙÙŠ Ø§Ù„Ø³Ù†Ø©ØŸ", a:["10","11","12"], c:2},
    {q:"5 Ã— 2 = ØŸ", a:["10","12","8"], c:0}
  ],
  3: [
    {q:"Ù…Ø±Ø­Ù„Ø© Ù…ØªÙ‚Ø¯Ù…Ø© ğŸ”¥", a:["A","B","C"], c:0}
  ]
};

let stage=1, index=0;
let progress = JSON.parse(localStorage.getItem("progress")) || {1:true,2:false,3:false};

function showMenu(){
  document.getElementById("menu").style.display="block";
  document.getElementById("game").style.display="none";

  if(progress[2]) document.getElementById("stage2").classList.remove("locked");
  if(progress[3]){
    let s3=document.getElementById("stage3");
    s3.classList.remove("locked");
    s3.onclick=()=>startStage(3);
  }
}

function startStage(s){
  stage=s;
  index=0;
  document.getElementById("menu").style.display="none";
  document.getElementById("game").style.display="block";
  loadQuestion();
}

function loadQuestion(){
  let q=data[stage][index];
  document.getElementById("question").innerText =
    `(${index+1}/${data[stage].length}) ` + q.q;

  let answers=document.getElementById("answers");
  answers.innerHTML="";
  q.a.forEach((txt,i)=>{
    let b=document.createElement("button");
    b.className="answer";
    b.innerText=txt;
    b.onclick=()=>check(i);
    answers.appendChild(b);
  });
}

function check(i){
  if(i===data[stage][index].c){
    index++;
    if(index < data[stage].length){
      loadQuestion();
    }else{
      completeStage();
    }
  }else{
    alert("âŒ Ø®Ø·Ø£");
  }
}

function completeStage(){
  alert(`âœ… Ø£Ø­Ø³Ù†Øª! Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${stage} Ù…ÙƒØªÙ…Ù„Ø©`);
  progress[stage+1]=true;
  localStorage.setItem("progress",JSON.stringify(progress));
  showMenu();
}

function resetGame(){
  localStorage.clear();
  location.reload();
}

showMenu();
</script>

</body>
</html>
